<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AI L√Ä TRI·ªÜU PH√ö ‚Äì H√ìA H·ªåC</title>
<style>
  :root{--bg:#000814;--card:#001d3d;--accent:#00b4d8}
  *{box-sizing:border-box}
  body{margin:0;font-family:Arial,Helvetica,sans-serif;background:var(--bg);color:#fff;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
  #wrap{width:100%;max-width:920px}
  h1{text-align:center;margin:6px 0 18px}
  #start-screen,#game{background:var(--card);padding:20px;border-radius:12px;box-shadow:0 0 18px rgba(0,180,216,.12)}
  input[type="text"]{width:100%;padding:10px;margin:8px 0;border-radius:6px;border:none}
  button{padding:10px 16px;border-radius:8px;border:none;background:#eee;color:#111;cursor:pointer}
  .answer-btn{display:block;width:100%;text-align:left;padding:12px;margin:8px 0;border-radius:8px;border:none;background:#05345a;color:#fff;font-size:16px}
  .answer-btn:hover{filter:brightness(1.08)}
  .correct{background:#00c853!important}
  .wrong{background:#d50000!important}
  #money-ladder{margin-top:14px;text-align:left}
  .step{padding:6px}
  .active-step{background:#ffd60a;color:#111}
  img.question-img{display:block;margin:12px auto;max-width:80%;border-radius:8px}
  .lifelines{margin-top:10px}
  .lifelines button{margin-right:8px}
  .note{font-size:13px;color:#bcd}
</style>
</head>
<body>
  <div id="wrap">
    <h1>üéØ AI L√Ä TRI·ªÜU PH√ö ‚Äì H√ìA H·ªåC üéØ</h1>

    <div id="start-screen">
      <h3 style="text-align:center">Nh·∫≠p th√¥ng tin ƒë·ªÉ b·∫Øt ƒë·∫ßu</h3>
      <input id="playerName" type="text" placeholder="H·ªç v√† t√™n">
      <input id="playerClass" type="text" placeholder="L·ªõp" style="margin-bottom:8px">
      <div style="text-align:center"><button id="startBtn" type="button">B·∫ÆT ƒê·∫¶U</button></div>
    </div>

    <div id="game" style="display:none;margin-top:18px">
      <div id="question" style="font-size:20px;margin-bottom:8px"></div>
      <div id="imageBox" aria-hidden="true"></div>
      <div class="answers" id="answers" role="list"></div>
      <div class="lifelines">
        <button id="fifty" type="button">50:50</button>
        <button id="skip" type="button">B·ªè qua</button>
      </div>
      <h3 style="margin-top:14px">Thang ti·ªÅn th∆∞·ªüng</h3>
      <div id="money-ladder" aria-hidden="true"></div>
    </div>
  </div>

<script>
(function(){
  'use strict';

  // State
  let playerName = '', playerClass = '';
  const money = ["200k","400k","600k","1 tri·ªáu","2 tri·ªáu","3 tri·ªáu","6 tri·ªáu","10 tri·ªáu","15 tri·ªáu","30 tri·ªáu"];

  // Questions (15) - c is 0-based index for correct answer
  const questions = [
    { q: 'Khi thay th·∫ø nguy√™n t·ª≠ hydrogen trong ammonia b·∫±ng g·ªëc hydrocarbon ta thu ƒë∆∞·ª£c h·ª£p ch·∫•t n√†o sau ƒë√¢y ?', a:['Carbohydrate','Ester','Amine','Carboxylic acid'], c:2 },
    { q: 'Ph√¢n t·ª≠ amine c√≥ c·∫•u t·∫°o t∆∞∆°ng t·ª± ph√¢n t·ª≠ n√†o sau ƒë√¢y nh·∫•t?', a:['H2O','HF','N2','NH3'], c:3 },
    { q: 'M√¥ h√¨nh c·∫•u t·∫°o sau ƒë√¢y l√† c·ªßa ch·∫•t n√†o ?', img: 'https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcR1SuhnpHnfUtJ0zNZ10kys2pfkmAFCi7N2U92nB_cw3UTNTHYm', a:['CH3OH','C2H5OH','CH3NH2','C6H5NH2'], c:2 },
    { q: 'Amine n√†o sau ƒë√¢y l√† ch·∫•t kh√≠ ·ªü ƒëi·ªÅu ki·ªán th∆∞·ªùng ?', a:['Methylamine','Aniline','N-methylpropan-2-amine','Isobutylamine'], c:0 },
    { q: 'Ch·∫•t n√†o sau ƒë√¢y l√† amine no, ƒë∆°n ch·ª©c, m·∫°ch h·ªü?', a:['CH3N','CH4N','CH5N','C2H5N'], c:2 },
    { q: 'Amine n√†o sau ƒë√¢y ch·ª©a v√≤ng benzene?', a:['Aniline','Ethylamine','Methylamine','Propylamine'], c:0 },
    { q: 'C√¥ng th·ª©c t·ªïng qu√° c·ªßa amine no, m·∫°ch h·ªü?', a:['CnH2n+3N','CnH2n+2+kNk','CnH2n+2-2a+kNk','CnH2n+1N'], c:1 },
    { q: 'khi thay ƒë·ªïi m·∫°ch carbon, v·ªã tr√≠ nh√≥m ch·ª©c ho·∫∑c s·ªë nh√≥m..(1)..li√™n k·∫øt v·ªõi nguy√™n t·ª≠..(2)..thu ƒë∆∞·ª£c c√°c ƒë·ªìng ph√¢n amine. N·ªôi dung ph√π h·ª£p l√†:', a:['ch·ª©c,hydrogen','ch·ª©c,carbon','th·∫ø,carbon','th·∫ø,nitrogen'], c:3 },
    { q: 'B·∫≠c c·ªßa amine l√†:', a:['b·∫≠c c·ªßa nguy√™n t·ª≠ carbon li√™n k·∫øt v·ªõi nh√≥m ch·ª©c NH2','s·ªë nguy√™n t·ª≠ hydrogen li√™n k·∫øt tr·ª±c ti·∫øp v·ªõi nguy√™n t·ª≠ nitrogen','s·ªë nguy√™n t·ª≠ hydrogen trong ph√¢n t·ª≠ ammonia b·ªã thay th·∫ø b·ªüi g·ªëc hydrocarbon','s·ªë g·ªëc hydrocarbon li√™n k·∫øt tr·ª±c ti·∫øp v·ªõi nguy√™n t·ª≠ nitrogen'], c:2 },
    { q: 'Trong Luminol (C8H7N3O2) kh√¥ng c√≥ nh√≥m ch·ª©c n√†o ?', img: 'https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcSHzv2uEmroxPFUdetlOr6l8nMv3_uH3Y1eq2mrGNZSL6vHDDbT', a:['Ester','Amine','Amide','Carbonyl'], c:0 },
    { q: 'H·ª£p ch·∫•t n√†o sau ƒë√¢y l√† amine b·∫≠c hai?', a:['Diethylamine','Ethylamine','Propylamine','Methylamine'], c:0 },
    { q: 'H·ª£p ch·∫•t n√†o sau ƒë√¢y l√† amine b·∫≠c ba?', a:['Diethylamine','Trimethylamine','Propylamine','Methylamine'], c:1 },
    { q: 'Trong ph√¢n t·ª≠ ch·∫•t n√†o sau ƒë√¢y c√≥ ch·ª©a nguy√™n t·ª≠ nitrogen?', a:['Glucose','Ethyl acetate','Methylamine','Saccharose'], c:2 },
    { q: 'T√™n g·ªëc-ch·ª©c c·ªßa amine CH3-CH2-NH2 l√†', a:['Ethylamine','N-methylethylamine','Methylethanamine','Diethylamine'], c:0 },
    { q: 'T√™n g·ªëc-ch·ª©c c·ªßa amine CH3-NH-CH2-CH3 l√†', a:['Methylethylamine','Ethylamine','Methylethanamine','Ethylmethylamine'], c:3 }
  ];

  let index = 0;
  let used50 = false, usedSkip = false;

  // DOM refs
  const startBtn = document.getElementById('startBtn');
  const startScreen = document.getElementById('start-screen');
  const gameEl = document.getElementById('game');
  const questionEl = document.getElementById('question');
  const imageBox = document.getElementById('imageBox');
  const answersBox = document.getElementById('answers');
  const moneyLadder = document.getElementById('money-ladder');
  const fiftyBtn = document.getElementById('fifty');
  const skipBtn = document.getElementById('skip');

  // Start
  function startGame(){
    playerName = document.getElementById('playerName').value.trim();
    playerClass = document.getElementById('playerClass').value.trim();
    if(!playerName || !playerClass){ alert('Vui l√≤ng nh·∫≠p h·ªç t√™n v√† l·ªõp'); return; }
    startScreen.style.display = 'none';
    gameEl.style.display = 'block';
    renderMoney();
    load();
  }

  startBtn.addEventListener('click', startGame);

  // lifelines
  fiftyBtn.addEventListener('click', ()=>{
    if(used50) return; used50 = true;
    const q = questions[index];
    let removed = 0;
    for(let i=0;i<4;i++){
      if(i !== q.c && removed < 2){
        const btn = document.getElementById('btn'+i);
        if(btn) btn.style.visibility = 'hidden';
        removed++;
      }
    }
  });

  skipBtn.addEventListener('click', ()=>{
    if(usedSkip) return; usedSkip = true; index++; load();
  });

  // Render current question
  function load(){
    try{
      if(index >= questions.length){
        gameEl.innerHTML = '';
        const done = document.createElement('div');
        const h = document.createElement('h2');
        h.textContent = 'üéâ B·∫°n ƒë√£ ho√†n th√†nh! üéâ';
        done.appendChild(h);
        gameEl.appendChild(done);
        return;
      }

      const q = questions[index];
      questionEl.textContent = 'C√¢u ' + (index+1) + ': ' + q.q;

      // image
      imageBox.innerHTML = '';
      if(q.img){
        const img = document.createElement('img');
        img.className = 'question-img';
        img.src = String(q.img);
        img.alt = 'H√¨nh c√¢u ' + (index+1);
        img.onload = function(){};
        img.onerror = function(){
          imageBox.textContent = 'Kh√¥ng th·ªÉ t·∫£i ·∫£nh cho c√¢u ' + (index+1) + '.';
        };
        imageBox.appendChild(img);
      }

      // answers
      answersBox.innerHTML = '';
      q.a.forEach(function(t,i){
        const b = document.createElement('button');
        b.className = 'answer-btn';
        b.id = 'btn' + i;
        b.type = 'button';
        b.textContent = String.fromCharCode(65+i) + ': ' + t;
        b.addEventListener('click', function(){ choose(i); });
        answersBox.appendChild(b);
      });

      highlight();
    }catch(err){
      console.error('Load error', err);
      // show friendly message
      gameEl.innerHTML = '';
      const errDiv = document.createElement('div');
      errDiv.style.color = '#f88';
      errDiv.textContent = 'C√≥ l·ªói x·∫£y ra. Vui l√≤ng t·∫£i l·∫°i trang.';
      gameEl.appendChild(errDiv);
    }
  }

  function choose(i){
    const q = questions[index];
    const btn = document.getElementById('btn'+i);
    if(i === q.c){
      if(btn) btn.classList.add('correct');
      setTimeout(function(){ index++; load(); }, 700);
    } else {
      if(btn) btn.classList.add('wrong');
      gameOver();
    }
  }

  function gameOver(){
    saveScore();
    gameEl.innerHTML = '';
    const h = document.createElement('h2');
    h.textContent = 'üíÄ TR√í CH∆†I K·∫æT TH√öC üíÄ';
    const p = document.createElement('p');
    p.textContent = 'B·∫°n d·ª´ng cu·ªôc ch∆°i t·∫°i c√¢u ' + (index+1);
    gameEl.appendChild(h);
    gameEl.appendChild(p);
  }

  function renderMoney(){
    moneyLadder.innerHTML = '';
    for(let i=money.length-1;i>=0;i--){
      const div = document.createElement('div');
      div.className = 'step';
      div.id = 'm' + i;
      div.textContent = (i+1) + '. ' + money[i];
      moneyLadder.appendChild(div);
    }
    highlight();
  }

  function highlight(){
    for(let i=0;i<money.length;i++){
      const el = document.getElementById('m'+i);
      if(el) el.classList.remove('active-step');
    }
    const cur = document.getElementById('m' + Math.min(index, money.length-1));
    if(cur) cur.classList.add('active-step');
  }

  function saveScore(){
    try{
      const board = JSON.parse(localStorage.getItem('ml_leader') || '[]');
      board.push({ name: playerName, class: playerClass, reached: index });
      localStorage.setItem('ml_leader', JSON.stringify(board));
    }catch(e){console.warn('saveScore failed', e)}
  }

})();
</script>
</body>
</html>
